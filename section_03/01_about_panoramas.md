# About Panoramas

Panorama is something I always love. Not because that it grants me more details - as mentioend by some other photographers, that you get all the center-quality image parts as you stitch your photos, and that means you wouldn't see much artifacts, since the image part produced by the center of a lens is always good enough. But is that the only good part? I mean, usually you are not doing large-format printing, and therefore cropping using a wide-angle lens would suffice. So why bother with stitching photos, which could fail according to a lot of factors like parallax and moving objects? It seems too much of a burden. What is so special about stitching photos?

Previously I thought that it is only because you want some more information in the image - for example, when you are shooting an architecture, you probably want to include its overall structure and its textures at the same time - that is, the macro view and the micro view. If you use a wide angle lens, you would capture the structure, while losing texture info. Or you are using a telephoto lens, which only gives you a glance at a small portion of the architecture. Under such circumstances, stitching the photos seems to be the right choice - you could capture both the structure while preserving the details.

That is, of course, the initial intention of not only mine, but also a large number of others'. However, as I shoot along, the accumulation of panoramas I stitched enlightened me of something else - something I didn't even notice before when I was using zoom lenses - that I am relying on my eyes more and more, instead of staring at the view finder to find something probably I wanted. It suddenly occured to me that I am not having a feeling for a long time - the feeling of something not being right when compositing photos in the view finder: maybe the shoreline I want to include is too long, and therefore I have to use a shorter focal length, and when I actually switched to a wider angle view, again I feel maybe the sky is taking too large of a portion in the photo. I just cannot find the precise, exact scene I want in the viewfinder: it enforces me to think in a 2:3 way (in medium format, it is 4:5), and unconsciously I incline to be unsatisfied with a photo if it doesn't seem right in the view finder, although after cropping, it might be of amusement.

But stitching panorama is a rather different thing - you gain the freedom of compositing as you wish, with some tiny defects - that you might not be able to visualize it in your camera. Some people might feel it inconvenient, and I shall agree with them, but it seems to me that we have forgotten the best visualizer we have, as well as the initial cause of the invention of cameras, our eyes. Why would people take photos? Because we see something, and we would like to capture the moment - we see something. What a beautiful word: to see! And we capture things, because we see; We don't feel right with the view finder, because we see! We could like to capture the thing we have in mind, without our thoughts being twisted by the view finder. And here we are: without seeing things in the view finder, we again picked up our old instinct: to see through our eyes, and composite as the picture in our mind. I want the long coast line without too much of the sky, OK! Just capture the coast line by doing a horizontal panorama. I want the peak of Mont Blanc extending to the arch up there, Sure! We do a series of vertical shoots! And after we collected all the pieces we want, the painting in our heart awaits.

## Lens Choices

Ever since I adopted the technique of panorama stitching, I hardly use zoom lenses any more. Why would I bother with a zoom lens, should I knew I would not composite my photo using the zooming functionality? I could always composite the view I want by stitching pieces - if not enough, just add more pieces. I could stitch until a 360 degree sphere if I wish to. Another thing I almost gave up on was the wide angle lenses, according to the fact I stated previously. However, I could not completely ditch wide-angle lenses away, because sometimes you just need to trade space for time - that is to say, star trails, specifically. But that is some rare occasion, and you can tell by seeing what tech specs those ultra wide angle lenses have - have you ever seen a 14mm f5.6? No, because people buying 14mm prime would definitely go shooting stars or the milky way.

Then what kind of lenses would I recommend for stitching panoramas? Well, that is a tough question and hthe answer ighly depends on the kind of photos you would like to take. Do you enjoy shooting things in a short distance and try to emphasize on its size compared to something that is distant away? Or do you prefer to shoot something that is on the horizon, and you like formats like 617? The former one I would recommend using 35mm, while for the latter I would go for something like 85mm or 135mm. Saying so, a 50mm is always something you can not go wrong. Although you would definitely get a 35mm or 85mm afterwards, as you develop deeper into your own taste. 

## Accessories

I would recommend at least a tripod and a nodal slide, although I often do the panorama with bare hands - especially when I am using a telephoto lens. However, without a nodal slide and a tripod, it is highly probable that you will not be rotating the camera around its nodal point - causing parallax to appear. If you are using something like 85mm, usually the parallax are not so noticable, and sometimes can be ignored. But if you are dealing with wider angle lenses, especially those <= 35mm ones, then you could run into big troubles. Without manually eliminating the parallax, you wouldn't be able to stitch the images, or you might not be able to preserve the perspective, should you choose to stitch using rectanglinear projection. But hey you are stitching something into a ultra-wide image, I suppose you would definitely want to try the perspective projection?

The reason I do not suggest hand-held is that if you rotate the camera as you usually do - that is, to rotate it around the body, you would 100% miss the nodal point:

> ![nodal point](https://cdn.fstoppers.com/styles/full/s3/media/2020/05/13/nando-nodal-point.jpg)
>
> Source: FStoppers

And this could actually cause such a result:

> ![parallax](https://upload.wikimedia.org/wikipedia/commons/2/2e/Parallax_Example.png)
> 
> Source: Wikipedia

Assume you were the stitcher and you saw the above example, would you know how to stitch the images? I guess not! And always remember that machines are usually more stupid than us, so please please think from the machine's perspective and try to provide photos with less parallax so that it can do the job for you.

In order to setup the nodal slide, just try different positions of a certain lens and mark the position where you witness almost no parallax when you rotate the camera, and that should do.

## Exposure

It is easy to decide the exposure of a photo with all those modern tools, with built-in light meters, with all the light metering modes, and high-speed chips; it makes things so easy for us that when it comes to shooting multiple photos and stitching them together, metering the light becomes such a non-trivial thing, that we either go Auto mode and make color blending in the photos seem so unnatural, or we go directly into Manual mode, as suggested by some online posts - which is the correct way to go - but only take the first photo as reference and get completely over/under-exposed images for the following sequences, introducing a lot of noises or losing highlight details.

The way I do light metering is pretty much inspired by Ansel Adams' zone theory - that you arrange your scene into different brightness zones, but instead of arranging them into ten brightness level, I prefer to arrange them into their absolute brightness denoted by EV value. The first thing I do before metering is framing the image, of course; and I will find the brightest spot and darkest spot according to my experience, then use the spot metering mode and calculate the brightness EV value using the given ISO, aperture and shutter speed. Once I get the brightness EV value of the darkest spot and brightest spot, I will take their mean EV value and translate it into aperture, ISO and shutter speed, and that shall be my reference exposure.

For example, currently I have ISO set to 100, Aperture being F4.0, and I get the shutter speed as 16" for the darkest spot, while I have the shutter speed as 1/200" for the brightest spot, that makes the EV values 0EV and 11.67 EV respectively. Their mean is at around 5.8 EV, which I round to 6 EV, giving me the new shutter speed as 1/4", and I shall expose all the photos using this shutter speed.

Now a new question pops up - what if the darkest spot and brightest spot have such a difference, for example, 20EV difference, while our camera only have a dynamic range of 16EV?

Where, that is where HDR bracketing pops in, and I guess you know how to do it. The reference exposure remains the same, though. In the example I mentioned just now, say we have the darkest spot of 0 EV and brightest spot as 20 EV, we will set the exposure to be the one corresponding to 10 EV, and enable HDR bracketing of +/- 3EV. In this case,  the reference image would capture information between 2.0EV to 18.0EV, the darker one would capture the information from 5.0EV to 21.0EV, while the brigher one would capture information of -1.0EV to 15.0 EV. Once you combine them together, you have information from -1.0EV until 21.0EV.

> ![bracketing example](https://cdn.mos.cms.futurecdn.net/AP2mkbJN2gNguNo29dHB8H-1200-80.png)
>
> Source: DigitalCameraWorld

So people might be worried about Vignette: do we count them in when claculating the exposure? After all, the Vignette could introduce a brightness difference of several EVs, and that, in extreme cases, might cause the loss of details in the dark?

Well, My opinion on this would be that it doesn't really matter. After all, you are stitching images - and the software is going to select the center part of each image, which means you are not really using the parts with strong vignette. Even if you do - well, why don't you just rotate your camera and take one more shot? It is not that hard!

## Regarding Imaging

Panorama itself can be useful in another case, and that is, to maintain the perspective you want to. It allows you to perform effectively a shift without needing a tilt-shift lens and technical cameras.

One question I faced before was that how come those illustrations can prompt me with an organized feeling, and further lead me to the thing the author would like me to see?

I bore the question with me for a long time, until someday I suddenly developed an interest in tilt-shift and learned about its effects, and something occured to me. A lot of photos - they prompt an organized feeling, because they are organized in a way. The most obvious example would be architecture photography - they have so little portion of the ground scene while so much of the architecture itself, and preserving the parallel lines of the architecture. Here is an example:

> ![tilt-shift example](https://s.studiobinder.com/wp-content/uploads/2019/08/What-is-a-Tilt-Shift-Shot-Tilt-Shift-Lens-Vertical-Convergence.jpg?resolution=1680,1.600000023841858)
> 
> Source: StudioBinder

We found the left image more amusing because it is organized - it preserves the perspective. Advanced panorama stiching software like PTGUI and Hugin allows you to change the view point toward a panorama by manipulating the projection, and hence manipulate the perspective. Usually you would get a more amusing image by using panorama stitching than by using tilt-shift lenses, because you do not face the optical defects of a physical lens at its rim. This is rather helpful when you shoot architecture and, in my opinion, portraits sometimes.

When the software stitches the images for you, it will try to find Points of Interest (POI) in the images and distort the image, while blending them together. A rule of thumb, as introduced by some posts I read before - would be to make your images have 1/3 overlap during daytime, or 1/2 overlap during night time. Actually, even if you take more or less, the stitching might still succeed / fail, all depending on the discovery point of interest. An easy example to demostrate this would be to stitch sky without clouds - and this would almost certainly fail, because you cannot find Points of Interest in the images. Once you have the POIs, I say you are good to go.

## Brenizer's Method

Another good thing about panorama is that it is effectively allowing you to use an "ideal" lens of very large effective aperture with a very large format - which means you can get a super shallow depth of field while maintaining a fairly large field of view - and that is something you could barely achieve without a large format camera during the age of films. But thanks to the technology and digitalization, we now can "mimic" such photos by using panorama stitching!

The secret behind this is that the depth of field (DoF) will not change should you use the same lens, be on the same aperture and focus to the same distance. When you are using a wide-angle lens, you are using an effectively smaller aperture for a specific part of the scene. It shall be explained in the following diagram:

> ![Effective Aperture](../images/effective_aperture.jpg)
>
> Source: Myself

You will found the following properties:

1. With a specific aperture, regardless of its focal length (assume light transmission rate 100% through the lens), the same area on CMOS will receive the same amount of light.
2. With a specific aperture, regarding the same part of a scene, a wider-angle lens will receive less amount of light from it, and the light of that specific part is effectively passing through a smaller physical aperture, compared to a telephoto lens. Thus, the Circle of Confusiion (CoC) of that part of Scene is effectively smaller with a wider-angle lens.

As you might heard from some photography textbook, that the Circle of Confusion is the determinant factor of the DoF of a photo, considering we are talking about a same CMOS / film. A larger CoC means that the light will spread into a light spot instead of a light dot more quickly, and therefore, blurs a certain part of scene more quickly.

Now consider you are shooting using a 85mm f1.4 lens. You know that you will have a larger CoC compared to a 35mm f1.4, with regard to a specific part of the scene, causing a shallower DoF. However, you also know that when you are using 85mm, you wouldn't be able to capture as much scene as a 35mm lens does, so you decided to stitch the photos shot with a 85mm f1.4, and guess what the result will be? You can get a photo with effective Field of View like a 35mm one, while preserve the shallow depth of field of a 85mm. And this is what called as "Brenizer's Method": Basically capture a larger FoV with a shallower DoF by stitching photos produced by a large-aperture lens with long focal length.

This method could be rather amusing especially when taking portraits: you could blur away the distractions in a scene easily. And this is where Brenizer'e Method was firstly used: in wedding photography.

## Of Failure and Success

A question I faced, when applying stitching panoramas, which troubled me a lot, was how to judge if a panorama will be successfully stitched or it would fail? How to decide if I could successfully apply the technique, given a scene setup?

This is a rather common problem, and it is actually the million dollar question in the techniques of doing a panorama. Once you got the answer, you would definitely know if a stitching would succeed, or fail, in advance, which shall be a very important reference when you are doing your work - because if you know something would fail, why stick to it instead of take out the wide angle lens in your bag and compromise? Sometimes, you just need to firstly capture the scene, and then worry about the quality of work, which, from my perspective, should not be something to be worried about unless you are a professional who really rely on this business.

I conclude my experiences into the following procedure. If you walk along this procedure, you will know if you are getting the result.

1. Are there enough POIs in the scene and is your split of scene (that is to say, to capture which part of the scene for each image) reasonable? For example, if you are shooting a painting, in which a very long section is pure white, it is highly probable that you wouldn't be able to stitch it because there are literally no POI in that long white section, and you wouldn't be able to find a reasonable split of scene should you use telephoto lens.
2. If POIs exist and a reasonable split of scene exist, are there moving objects that could disturb the finding of POIs? For example, a car passing through you image, covering the POIs you would like to use. If the answer is yes and the moving object will be essentially preventing you from getting the POIs, you would probably fail and should think of using some other methods.
3. If those moving objects are not blocking the essential POIs, for example, you have some people walking in the scene (which I assume you would like to remove afterwards), Will you be able to capture whatever detail you want in the series of photos? For example, I could accept a man walking by, blocking a part of a street for a moment, but in the next photo I should be able to capture the details of the street missed out in the previous one. If you cannot, you might still be able to stitch the panorama, but you will spend more time on removing the unwanted objects and covering the lost parts.

It is essentially easy like this. Once you ask yourself the 3 questions above, I believe you will have a judgement on whether the panorama is doable.

Happy Shooting!
